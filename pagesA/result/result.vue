<template>	<view>		<navbar title='查询结果' @lefts=left()></navbar>		<view class="container">			<view class="fixation" v-if="result.length!=0"><!--				<view class="switch">--><!--					<selectSwitch @change="changeSwitch" />--><!--				</view>-->				<view class="box1" v-if="sumdata.length!=0">          <u-scroll-list>            <view v-for="(item,index) in Object.entries(sumdata[0])" class="unit4_box">                <view class="unit4_box_item unit4_box_item1">                  <view class="unit4_box_value">{{Number(item[1]).toFixed(2)}}</view>                </view>                <view class="unit4_box_item">                  <view class="unit4_box_key">{{item[0]}}</view>                </view>            </view>          </u-scroll-list>				</view>      </view>			<view v-if="result.length!=0">				<view v-if="!cut">					<view class="tablebox">            <uni-card>              <view style="height: 500px">                <zb-table                    :columns="column"                    :stripe="true"                    @rowClick="rowClick"                    @toggleRowSelection="toggleRowSelection"                    @toggleAllSelection="toggleAllSelection"                    :border="true"                    :data="columndata"></zb-table>              </view>            </uni-card>					</view>					<!--          分页器-->          <view class="fypage">            <uni-pagination title="" :pageSize="pageSize" show-icon="true" :total="total" :current="page"                            @change="dj()">            </uni-pagination>          </view>				</view>			</view>			<!--    卡片显示-->			<view v-if="cut">				<view class="card">					<view v-for="(item,index) in resultcard" class="box" @click="detail(item,index)">            <view v-for="(items,indexs) in resultcard">{{item[cardname[indexs]]}}</view>					</view>				</view>			</view>		</view>		<view v-if="result.length==0" class="msj">      <view>        <image src="https://integral-1256268364.cos.ap-chengdu.myqcloud.com/c5b9ec0862a57c4cee9d7373806b93cab8013b3c.jpg"></image>      </view>     <view>未查询到数据</view>    </view>	</view></template><script>	import selectSwitch from "@/components/xuan-switch/xuan-switch.vue";	import navbar from '../../components/nav.vue'	export default {		data() {			return {        column:'',        columndata:'',				resultcard: '', //卡片数据				showdata: '', //展示数据				page: '', //当前页				total: '', //数据总量				pageSize: 20, //一页数量				bgColor: '#4f99ff',				bdt: [], //表头				result: null, //查询结果				sumdata: '', //数据汇总				cut: false, //切换展示        cardname:'',//卡片上的名称			};		},		components: {			selectSwitch,			navbar,		},		onLoad(option) {			this.bdt = JSON.parse(option.bdt)			this.result = JSON.parse(uni.getStorageSync('result'))      //this.result=uni.getStorageSync('result')if(option.sumdata){  this.sumdata = JSON.parse(option.sumdata)}			this.tableData = this.result;			this.pagination()			this.showdata = this.result[0]//测试卡片形式显示      if(option.creportcolumns){        //this.cut=true        console.log('卡片',option.creportcolumns.split(';'))        this.cardname=option.creportcolumns.split(';')        this.resultcard = this.result[0]console.log('kapian',this.resultcard)        console.log(this.cardname[0],this.cardname[1])      }		},		onShow() {      //新table1      let column=[]      this.bdt.forEach((item)=>{        column.push({          name:item.name,          label:item.lable,          width:item.width*2,          align:'center'        })      })      // column[0].fixed=true       //column[0].width=120      // column[1].fixed=true      this.column=column      this.columndata=this.showdata    },		methods: {			dj(e) {				this.showdata = this.result[e.current - 1]        this.columndata=this.showdata      },			//点击分页			pagination() {				this.total = this.result.length				let pageCount = Math.ceil(this.total / this.pageSize);				this.total % this.pageSize == 0 ? pageCount : pageCount + 1				let arr = this.result				let size = this.pageSize				const arrNum = Math.ceil(arr.length / size, 10); // Math.ceil()向上取整的方法，用来计算拆分后数组的长度				let index = 0; // 定义初始索引				let resIndex = 0; // 用来保存每次拆分的长度				const result = [];				while (index < arrNum) {					result[index] = arr.slice(Number(resIndex), Number(size) + Number(resIndex));					resIndex += size;					index++;				}				this.result = result			},      rowClick(row,index){        let data = JSON.stringify(row)        uni.navigateTo({          url: `../../pagesA/detail/detail?list=${data}`        });      },			//自定义返回			left() {				uni.navigateBack({					delta: 1				});			},			changeSwitch(isSwitch) {				// console.log(isSwitch)				this.cut = !this.cut			},			//显示所有数据			detail(item, index) {				console.log('跳转', item)				let data = JSON.stringify(item)				console.log(data)				uni.navigateTo({					url: `../../pagesA/detail/detail?list=${data}`				});			}		}	}</script><style lang="scss">	page {		background-color: #E5E5E5;	}	.container {}	.switch {		margin: 20rpx;	}	.card {		display: flex;		justify-content: center;		align-items: center;		flex-direction: column;		.box {			margin: 20rpx 0;			width: 700rpx;			border-radius: 30rpx;			background-color: #ffffff;			font-weight: 400;			.boxunit1 {				padding: 20rpx 20rpx;				display: flex;				justify-content: space-between;				font-size: 40rpx;				border-bottom: 1px #E5E5E5 solid;				.boxunit1_name {					color: #52c8f1;				}			}			.boxunit2 {				font-size: 30rpx;				padding: 10rpx 20rpx;				display: flex;				justify-content: space-between;			}			.boxunit3 {				font-size: 30rpx;				padding: 10rpx 20rpx;				display: flex;			}		}	}	.tablebox {		//margin: 0 20rpx;    margin-top: 30rpx;    //margin-left: 20rpx;	}	.box1 {		margin: 20rpx auto;		background-color: #ffffff;		border-radius: 30rpx;		width: 700rpx;	}	.unit4_box {    margin-top: 30rpx;		display: flex;		flex-direction: column;		//align-items: center;    //justify-content: center;		.unit4_box_item {			font-size: 34rpx;      width: 100px;      margin: 0 40rpx;      display: flex;      justify-content: center;			.unit4_box_value {				font-size: 30rpx;				color: #52c8f1;			}			.unit4_box_key {				font-size: 26rpx;			}		}    .unit4_box_item1{      //font-size: 40rpx;      margin-bottom: 20rpx;      ////width: 150rpx;    }	}	.fixation {		position: -webkit-sticky;		position: sticky;		z-index: 999;		background-color: #E5E5E5;		padding-top: 10rpx;	}  .fypage{    margin:30rpx 0;    display: flex;    justify-content: center;    align-items: center;  }  /deep/.u-scroll-list__indicator.data-v-e2a26316{    margin-top: 0;  }  .msj{    margin-top: 200px;    display: flex;    flex-direction: column;    justify-content: center;    align-items: center;  }</style>